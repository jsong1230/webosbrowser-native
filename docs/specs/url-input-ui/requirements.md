# URL 입력 UI — 요구사항 분석서

## 1. 개요

### 기능명
URL 입력 UI (F-03)

### 목적
리모컨만으로 웹 URL을 입력할 수 있는 사용자 인터페이스를 제공하여, 프로젝터 대화면 환경에서 편리하게 웹사이트에 접근할 수 있도록 합니다.

### 대상 사용자
- 리모컨으로 URL을 입력하여 웹 브라우징을 하고자 하는 프로젝터 사용자
- 마우스/키보드 없이 TV 리모컨만으로 웹 탐색을 원하는 일반 사용자
- 영상 스트리밍 사이트, 포털, 뉴스 사이트에 빠르게 접근하고자 하는 가정용 엔터테인먼트 사용자

### 요청 배경
- webOS 프로젝터는 물리적 키보드가 없어 URL 입력이 어려움
- 기존 브라우저는 마우스/터치 전제로 설계되어 리모컨 조작에 최적화되지 않음
- 3m 거리에서도 명확하게 보이는 대화면 최적화 입력 UI 필요
- 리모컨 5-way 방향키(상/하/좌/우/선택)로 모든 입력 가능해야 함

---

## 2. 기능 요구사항 (Functional Requirements)

### FR-1: URL 입력 필드
- **설명**: 사용자가 URL을 입력할 수 있는 텍스트 입력 필드를 제공합니다.
- **유저 스토리**: As a 프로젝터 사용자, I want URL 입력 필드를 리모컨으로 포커스하고 편집할 수 있기를 원합니다, so that 키보드 없이 웹사이트에 접근할 수 있습니다.
- **우선순위**: Must
- **상세 요구사항**:
  - URLBar 컴포넌트: Enact Input 또는 커스텀 입력 필드
  - 리모컨 포커스 시 테두리 강조 표시 (Spotlightable)
  - 현재 입력된 URL 또는 현재 페이지 URL 표시
  - 입력 중일 때와 비활성 상태 구분
  - 최소 폰트 크기 18px (3m 거리 가독성)
  - 입력 필드 너비: 화면 너비의 60% 이상

### FR-2: 가상 키보드 (리모컨 최적화)
- **설명**: 리모컨 방향키로 조작 가능한 가상 키보드를 제공합니다.
- **유저 스토리**: As a 리모컨 사용자, I want 방향키로 문자를 선택하고 입력할 수 있기를 원합니다, so that 물리 키보드 없이 URL을 입력할 수 있습니다.
- **우선순위**: Must
- **상세 요구사항**:
  - 키보드 레이아웃:
    - 영문 알파벳 (a-z)
    - 숫자 (0-9)
    - 특수문자 (`.`, `/`, `-`, `:`, `?`, `=`, `&`, `_`)
    - 제어 키 (스페이스, 백스페이스, 확인/Enter, 취소)
  - 그리드 레이아웃 (QWERTY 배열 또는 최적화된 배열)
  - 리모컨 상/하/좌/우로 키 간 포커스 이동
  - 선택 버튼으로 문자 입력
  - 현재 포커스된 키 하이라이트 (두꺼운 테두리, 배경색 변화)
  - 키 크기: 최소 60x60px (리모컨 조작 편의성)
  - 백 버튼으로 가상 키보드 닫기

### FR-3: URL 자동완성
- **설명**: 입력된 문자열과 일치하는 히스토리, 북마크 목록을 자동완성 제안으로 표시합니다.
- **유저 스토리**: As a 사용자, I want 이전에 방문했던 사이트를 빠르게 다시 접근할 수 있기를 원합니다, so that 전체 URL을 다시 입력하지 않아도 됩니다.
- **우선순위**: Should
- **상세 요구사항**:
  - 입력 중 히스토리, 북마크에서 일치하는 항목 검색
  - 드롭다운 리스트로 자동완성 제안 표시 (최대 5개)
  - 방향키 하로 자동완성 리스트 포커스 이동
  - 선택 버튼으로 제안 선택 → URL 필드에 채우기
  - 제안 항목: 타이틀 + URL 표시
  - 제안 없을 시 드롭다운 숨김

### FR-4: URL 유효성 검증 및 자동 보완
- **설명**: 입력된 문자열이 유효한 URL인지 검증하고, 필요 시 자동으로 프로토콜을 추가합니다.
- **유저 스토리**: As a 사용자, I want `http://`를 생략해도 웹사이트에 접근할 수 있기를 원합니다, so that 입력 시간을 절약할 수 있습니다.
- **우선순위**: Must
- **상세 요구사항**:
  - URL 형식 검증:
    - 도메인 형식: `example.com`, `www.example.com`
    - 프로토콜 포함: `http://`, `https://`
    - 경로 포함: `example.com/path?query=1`
  - 자동 보완 규칙:
    - 프로토콜 없으면 `http://` 자동 추가 (예: `google.com` → `http://google.com`)
    - 검색어로 판단 시 검색 엔진으로 쿼리 (F-09 검색 엔진 통합과 연계)
  - 유효하지 않은 입력 시 에러 메시지 표시 (예: "유효한 URL을 입력하세요")

### FR-5: URL 입력 확인 및 페이지 로드
- **설명**: 사용자가 URL 입력을 완료하면 WebView 컴포넌트로 페이지를 로드합니다.
- **유저 스토리**: As a 사용자, I want URL 입력 후 확인 버튼을 누르면 해당 페이지가 로드되기를 원합니다, so that 입력한 사이트를 즉시 볼 수 있습니다.
- **우선순위**: Must
- **상세 요구사항**:
  - 확인(Enter) 버튼 클릭 시 WebView 컴포넌트에 URL 전달
  - URL 로드 시작 시 로딩 인디케이터 표시 (F-05와 연계)
  - 로드 성공 시 URL 입력 필드에 현재 페이지 URL 표시
  - 로드 실패 시 에러 메시지 표시 (F-10 에러 처리와 연계)
  - ESC/취소 버튼으로 입력 취소 (이전 URL 복원)

### FR-6: 리모컨 키 매핑
- **설명**: webOS 리모컨 물리 버튼을 URL 입력 UI에 매핑합니다.
- **유저 스토리**: As a 리모컨 사용자, I want 리모컨 버튼만으로 URL 입력의 모든 기능을 사용할 수 있기를 원합니다, so that 추가 입력 장치 없이 브라우저를 사용할 수 있습니다.
- **우선순위**: Must
- **상세 요구사항**:
  - 방향키 상/하/좌/우: 가상 키보드 내 포커스 이동, 자동완성 리스트 이동
  - 선택 버튼: 키 입력, 자동완성 항목 선택, 확인 버튼 실행
  - 백 버튼: 가상 키보드 닫기, URL 입력 취소
  - 홈 버튼: (선택) 홈 페이지로 이동
  - 재생/일시정지 버튼: (선택) 가상 키보드 토글

---

## 3. 비기능 요구사항 (Non-Functional Requirements)

### 성능
- **입력 반응 속도**: 리모컨 버튼 입력 후 0.3초 이내에 UI 반응 (포커스 이동, 문자 입력)
- **가상 키보드 렌더링 시간**: 키보드 호출 후 1초 이내 화면 표시
- **자동완성 검색 속도**: 문자 입력 후 0.5초 이내 제안 목록 표시
- **메모리 사용량**: 가상 키보드 포함 URL 입력 UI는 최대 50MB 이하

### 가독성 (대화면 최적화)
- **폰트 크기**:
  - URL 입력 필드: 최소 18px
  - 가상 키보드 키: 최소 20px
  - 자동완성 제안: 최소 16px
- **대비**: 배경과 전경 색상 대비 비율 4.5:1 이상 (WCAG AA 기준)
- **포커스 표시**: 포커스된 요소는 3px 두께 테두리 또는 명확한 배경색 변화

### UX (리모컨 최적화)
- **포커스 경로**: 리모컨 방향키로 모든 UI 요소 접근 가능, 포커스 경로가 직관적
- **키보드 레이아웃**: 사용 빈도 높은 문자(알파벳, 숫자)를 중앙에 배치
- **백스페이스 위치**: 키보드 우측 상단 또는 하단에 쉽게 접근 가능한 위치
- **에러 피드백**: 잘못된 입력 시 시각적 피드백 (빨간색 테두리, 에러 메시지)

### 확장성
- **다국어 지원**: 향후 한글 키보드, 일본어 키보드 추가 가능하도록 키보드 레이아웃 모듈화
- **키보드 테마**: 다크/라이트 모드 지원 가능하도록 스타일 분리

### 보안
- **입력 검증**: XSS 공격 방지를 위해 입력값 이스케이프 처리
- **HTTPS 우선**: URL 자동 보완 시 HTTPS 우선 제안 (F-14 보안 표시와 연계)

---

## 4. 제약조건

### webOS 플랫폼 제약사항
- **리모컨 전용 입력**: 마우스, 터치, 물리 키보드 사용 불가
- **Spotlight 시스템**: Enact의 Spotlight 시스템을 통해 포커스 관리 필수 (Spotlightable 컴포넌트 사용)
- **5-way 방향키**: 상/하/좌/우/선택 버튼만으로 모든 입력 처리
- **화면 해상도**: 4K UHD (3840x2160) 기본, Full HD (1920x1080) 호환

### 기술 제약사항
- **프레임워크**: Enact 프레임워크 기반 (React 컴포넌트)
- **UI 컴포넌트**: Enact Moonstone UI 컴포넌트 우선 사용 (Input, Button, VirtualList 등)
- **CSS Modules**: 스타일링은 `.module.less` 파일로 분리
- **상태 관리**: React Hooks (useState, useEffect)

### 의존성
- **F-01 (프로젝트 초기 설정)**: Enact 프로젝트 구조 및 라우팅 설정 완료 필요
- **F-02 (웹뷰 통합)**: URL 로드를 위한 WebView 컴포넌트 API 필요
- **F-08 (히스토리 관리)**: (선택) 자동완성 기능에서 히스토리 데이터 사용
- **F-07 (북마크 관리)**: (선택) 자동완성 기능에서 북마크 데이터 사용

### 범위 외 (Out of Scope)
- **음성 입력**: 음성 인식을 통한 URL 입력 미지원
- **한글 키보드**: 이번 버전에서는 영문 키보드만 제공 (향후 확장 가능)
- **URL 히스토리 동기화**: 외부 브라우저와 히스토리 동기화 미지원
- **QR 코드 스캔**: 리모컨 카메라를 통한 QR 코드 URL 입력 미지원

---

## 5. 용어 정의

| 용어 | 정의 |
|------|------|
| **URLBar** | URL을 입력하고 표시하는 컴포넌트 |
| **가상 키보드** | 리모컨으로 조작 가능한 화면상 키보드 UI |
| **Spotlight** | Enact 프레임워크의 포커스 관리 시스템 (리모컨 방향키 포커스 이동) |
| **Spotlightable** | Spotlight 시스템에서 포커스 가능한 컴포넌트 속성 |
| **5-way 방향키** | webOS 리모컨의 상/하/좌/우/선택 버튼 |
| **자동완성** | 입력된 문자열과 일치하는 히스토리, 북마크를 제안하는 기능 |
| **URL 검증** | 입력된 문자열이 유효한 URL 형식인지 확인하는 프로세스 |
| **프로토콜 자동 추가** | `example.com` 입력 시 `http://example.com`으로 변환하는 기능 |

---

## 6. 완료 기준 (Acceptance Criteria)

### AC-1: URL 입력 필드 렌더링
- [ ] URLBar 컴포넌트가 화면 상단에 표시됨
- [ ] 리모컨 방향키로 URL 입력 필드에 포커스 이동 가능
- [ ] 포커스 시 명확한 테두리 또는 배경색 하이라이트 표시
- [ ] 현재 페이지 URL이 입력 필드에 표시됨

### AC-2: 가상 키보드 동작
- [ ] URL 입력 필드 선택 시 가상 키보드가 화면 하단에 표시됨
- [ ] 리모컨 방향키로 키보드 내 모든 키에 포커스 이동 가능
- [ ] 선택 버튼으로 문자 입력 시 URL 필드에 반영됨
- [ ] 백스페이스 키로 마지막 문자 삭제 가능
- [ ] 백 버튼으로 가상 키보드 닫기 가능

### AC-3: URL 유효성 검증 및 자동 보완
- [ ] `google.com` 입력 시 `http://google.com`으로 자동 변환
- [ ] `https://example.com` 입력 시 프로토콜 유지
- [ ] 유효하지 않은 입력 시 에러 메시지 표시
- [ ] 검색어 입력 시 검색 엔진으로 쿼리 (F-09와 연계)

### AC-4: 페이지 로드
- [ ] 확인(Enter) 버튼 클릭 시 WebView에서 URL 로드 시작
- [ ] 로드 성공 시 입력 필드에 최종 URL 표시
- [ ] 로드 실패 시 에러 메시지 표시
- [ ] ESC/취소 버튼으로 입력 취소 가능 (이전 URL 복원)

### AC-5: 자동완성 (선택적)
- [ ] 문자 입력 시 일치하는 히스토리, 북마크 제안 표시
- [ ] 방향키 하로 제안 리스트 포커스 이동
- [ ] 선택 버튼으로 제안 선택 시 URL 필드에 채워짐
- [ ] 제안 없을 시 드롭다운 숨김

### AC-6: 리모컨 키 매핑
- [ ] 방향키로 가상 키보드 및 자동완성 리스트 탐색 가능
- [ ] 선택 버튼으로 문자 입력 및 확인 가능
- [ ] 백 버튼으로 키보드 닫기 가능
- [ ] 모든 기능을 마우스 없이 리모컨만으로 사용 가능

### AC-7: 성능 및 가독성
- [ ] 리모컨 입력 후 0.3초 이내 UI 반응
- [ ] 폰트 크기가 3m 거리에서 가독 가능 (최소 18px)
- [ ] 포커스된 요소가 명확하게 구분됨

### AC-8: 회귀 테스트
- [ ] 주요 웹사이트 URL 입력 후 정상 로드 (google.com, naver.com, youtube.com)
- [ ] 긴 URL 입력 시 필드 스크롤 또는 말줄임(...) 표시
- [ ] 특수문자 포함 URL 정상 입력 및 로드

---

## 7. 참고 사항

### 관련 문서
- PRD: `docs/project/prd.md`
- 기능 백로그: `docs/project/features.md`
- CLAUDE.md: 프로젝트 규칙 및 코딩 컨벤션

### 참고 구현
- Enact VirtualKeyboard: https://enactjs.com/docs/modules/moonstone/VirtualKeyboard/
- Enact Input: https://enactjs.com/docs/modules/moonstone/Input/
- Enact Spotlight: https://enactjs.com/docs/modules/spotlight/

### 우선순위 조정 가능성
- 자동완성 기능 (FR-3)은 Should 우선순위로, F-07, F-08 완료 후 추가 가능
- 한글 키보드는 M3 이후 확장 기능으로 연기 가능
