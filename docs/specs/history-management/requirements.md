# 히스토리 관리 — 요구사항 분석서

## 1. 개요

### 기능명
히스토리 관리 (F-08)

### 목적
사용자가 방문한 웹 페이지 기록을 자동으로 저장하고 관리할 수 있는 기능을 제공하여, 리모컨만으로도 과거 방문 페이지를 빠르게 재방문하거나 삭제할 수 있도록 합니다.

### 대상 사용자
- 이전에 방문한 웹사이트를 다시 찾고자 하는 프로젝터 사용자
- 북마크에 저장하지 않았지만 며칠 전에 본 페이지를 기억해내고 싶은 일반 사용자
- 브라우징 흔적을 관리하고 싶은 개인정보 보호 중시 사용자
- URL을 정확히 기억하지 못하지만 최근에 방문한 페이지를 찾으려는 사용자

### 요청 배경
- 웹 브라우징 시 우연히 발견한 유용한 페이지를 나중에 다시 찾기 어려움
- 북마크에 저장하기는 번거롭지만 방문 기록이 자동으로 남으면 편리함
- 히스토리는 웹 브라우저의 기본 기능으로, 사용자 경험에 필수적
- 대화면 환경에서 날짜별 히스토리 목록을 탐색하기 위한 리모컨 최적화 UI 필요
- F-02 웹뷰 통합에서 구현한 페이지 방문 이벤트를 활용하여 자동 기록 가능

---

## 2. 기능 요구사항 (Functional Requirements)

### FR-1: 자동 히스토리 기록
- **설명**: 사용자가 웹 페이지를 방문하면 자동으로 히스토리에 저장합니다.
- **유저 스토리**: As a 사용자, I want 방문한 페이지가 자동으로 기록되기를 원합니다, so that 나중에 수동으로 저장하지 않아도 과거 방문 페이지를 찾을 수 있습니다.
- **우선순위**: Must
- **상세 요구사항**:
  - 트리거: WebView의 `onLoadEnd` 이벤트 발생 시 (F-02 연계)
  - 기록 대상:
    - **URL**: 방문한 웹 페이지 URL
    - **제목**: 웹 페이지 제목 (document.title)
    - **방문 시각**: Unix timestamp (밀리초 단위)
    - **파비콘**: 웹사이트 파비콘 URL (선택적, 가능한 경우)
  - 기록 조건:
    - 페이지 로딩이 성공적으로 완료된 경우만 기록
    - 에러 페이지는 기록하지 않음
    - 동일 URL을 짧은 시간 내(1분) 재방문 시 중복 기록하지 않음 (마지막 방문 시각만 업데이트)
  - 저장 위치: IndexedDB의 `history` 오브젝트 스토어
  - 백그라운드 저장: 사용자 인터페이스를 차단하지 않고 비동기로 저장

### FR-2: 히스토리 목록 조회
- **설명**: 저장된 히스토리를 날짜별로 그룹화하여 리스트 형태로 조회합니다.
- **유저 스토리**: As a 사용자, I want 방문 기록을 날짜별로 볼 수 있기를 원합니다, so that 언제 어떤 페이지를 방문했는지 쉽게 파악할 수 있습니다.
- **우선순위**: Must
- **상세 요구사항**:
  - HistoryPanel 컴포넌트 (히스토리 목록 화면)
  - 히스토리 메뉴 버튼으로 패널 열기 (NavigationBar 또는 리모컨 단축키)
  - 히스토리 리스트 표시:
    - **날짜별 그룹화**: "오늘", "어제", "지난 7일", "이번 달", "이전 달" 등
    - **각 항목**: 파비콘 (선택), 제목, URL (서브 텍스트), 방문 시각 (HH:mm)
    - **최신순 정렬**: 가장 최근 방문한 페이지가 상단에 표시
  - 리모컨 방향키 상/하로 목록 스크롤
  - 포커스된 히스토리 항목 하이라이트 표시 (두꺼운 테두리 또는 배경색)
  - 빈 히스토리 목록일 경우 "방문 기록이 없습니다" 메시지 표시
  - 백 버튼으로 패널 닫기

### FR-3: 히스토리 실행 (페이지 열기)
- **설명**: 히스토리 목록에서 히스토리 항목을 선택하면 해당 페이지를 WebView에서 로드합니다.
- **유저 스토리**: As a 사용자, I want 히스토리 항목을 선택하면 해당 페이지가 즉시 열리기를 원합니다, so that URL을 다시 입력하지 않아도 됩니다.
- **우선순위**: Must
- **상세 요구사항**:
  - 히스토리 항목에서 선택 버튼 클릭 시 해당 URL로 페이지 로드
  - 새 탭에서 열기 옵션 제공 (컨텍스트 메뉴 또는 추가 버튼)
  - 로드 시작 시 로딩 인디케이터 표시 (F-05와 연계)
  - 로드 성공 시 HistoryPanel 자동 닫기 (설정 가능)
  - 로드 실패 시 에러 메시지 표시 (F-10과 연계)

### FR-4: 히스토리 삭제
- **설명**: 히스토리 목록에서 선택한 항목을 개별 삭제하거나 전체/기간별 일괄 삭제합니다.
- **유저 스토리**: As a 사용자, I want 특정 방문 기록을 삭제할 수 있기를 원합니다, so that 개인정보를 보호하고 히스토리 목록을 깔끔하게 유지할 수 있습니다.
- **우선순위**: Must
- **상세 요구사항**:
  - **개별 삭제**:
    - 히스토리 항목에서 삭제 버튼 또는 컨텍스트 메뉴
    - 삭제 확인 다이얼로그 표시 ("히스토리를 삭제하시겠습니까?")
    - 확인 버튼으로 삭제, 취소 버튼으로 닫기
    - 삭제 성공 시 목록에서 즉시 제거, 토스트 메시지 표시 ("히스토리가 삭제되었습니다")
    - 삭제 후 포커스는 이전 항목 또는 다음 항목으로 이동
  - **전체 삭제**:
    - HistoryPanel 상단에 "모두 삭제" 버튼
    - 삭제 확인 다이얼로그: "모든 방문 기록을 삭제하시겠습니까?"
    - 확인 시 IndexedDB의 모든 히스토리 데이터 삭제
    - 삭제 후 빈 히스토리 메시지 표시
  - **기간별 삭제**:
    - "지난 1시간", "오늘", "지난 7일", "지난 30일", "전체 기록" 선택 옵션
    - 선택한 기간의 히스토리만 삭제
    - 확인 다이얼로그: "지난 7일 방문 기록을 삭제하시겠습니까?"

### FR-5: 히스토리 검색
- **설명**: 히스토리 목록에서 제목이나 URL로 검색하여 원하는 히스토리를 빠르게 찾습니다.
- **유저 스토리**: As a 사용자, I want 히스토리 목록에서 특정 페이지를 검색할 수 있기를 원합니다, so that 많은 히스토리 중에서도 쉽게 찾을 수 있습니다.
- **우선순위**: Should
- **상세 요구사항**:
  - HistoryPanel 상단에 검색 입력 필드
  - 리모컨 가상 키보드로 검색어 입력 (F-03 연계)
  - 제목 또는 URL에서 일치하는 히스토리 필터링
  - 검색 결과 실시간 업데이트
  - 검색 결과도 날짜별 그룹화 유지
  - 검색어 클리어 버튼 제공
  - 검색 결과가 없을 경우 "검색 결과가 없습니다" 메시지 표시

### FR-6: 히스토리 데이터 영속성 (IndexedDB 저장)
- **설명**: 히스토리 데이터를 IndexedDB에 저장하여 앱 재시작 후에도 유지됩니다.
- **유저 스토리**: As a 사용자, I want 방문 기록이 앱을 종료해도 사라지지 않기를 원합니다, so that 다음에 앱을 실행할 때도 과거 방문 기록을 볼 수 있습니다.
- **우선순위**: Must
- **상세 요구사항**:
  - HistoryManager 서비스: IndexedDB를 사용한 CRUD 작업
  - 히스토리 데이터 구조:
    ```javascript
    {
      id: "unique-id", // UUID 또는 auto-increment ID
      url: "https://www.youtube.com/watch?v=abc123",
      title: "YouTube - 동영상 제목",
      favicon: "https://www.youtube.com/favicon.ico", // 선택적
      visitedAt: 1620000000000, // Unix timestamp (밀리초)
      visitCount: 3 // 동일 URL 재방문 횟수 (선택적)
    }
    ```
  - IndexedDB 스키마:
    - `history` 오브젝트 스토어 (키: `id`, 인덱스: `url`, `visitedAt`, `title`)
    - 인덱스 설정:
      - `url` 인덱스: 중복 방지 및 빠른 조회
      - `visitedAt` 인덱스: 날짜별 정렬 및 필터링
      - `title` 인덱스: 검색 최적화
  - 앱 초기화 시 히스토리 데이터 로드
  - 히스토리 용량 제한: 최대 5,000개 항목 (오래된 항목부터 자동 삭제)

### FR-7: URL 자동완성 연동
- **설명**: URL 입력 시 히스토리 데이터를 기반으로 자동완성 제안을 제공합니다.
- **유저 스토리**: As a 사용자, I want URL 입력 시 과거 방문한 페이지가 자동완성되기를 원합니다, so that 빠르게 URL을 입력할 수 있습니다.
- **우선순위**: Should
- **상세 요구사항**:
  - URLBar 컴포넌트에 히스토리 자동완성 통합 (F-03 연계)
  - 사용자가 입력한 텍스트와 일치하는 히스토리 항목 제안
  - 제안 항목: 제목, URL, 마지막 방문 시각
  - 방향키 상/하로 제안 목록 탐색, Enter로 선택
  - 제안 우선순위:
    1. 방문 빈도 높은 페이지 (visitCount)
    2. 최근 방문 페이지 (visitedAt)
  - 최대 10개 제안 표시

### FR-8: 리모컨 키 매핑
- **설명**: webOS 리모컨 물리 버튼을 히스토리 기능에 매핑합니다.
- **유저 스토리**: As a 리모컨 사용자, I want 리모컨 버튼만으로 히스토리 관리의 모든 기능을 사용할 수 있기를 원합니다, so that 마우스 없이 편리하게 히스토리를 관리할 수 있습니다.
- **우선순위**: Must
- **상세 요구사항**:
  - 방향키 상/하: 히스토리 목록 스크롤
  - 선택 버튼: 히스토리 실행 (페이지 열기)
  - 백 버튼: HistoryPanel 닫기
  - 컬러 버튼 (선택):
    - 빨강: 히스토리 검색
    - 노랑: 히스토리 삭제 (개별)
    - 파랑: 모두 삭제
  - 옵션 버튼: 컨텍스트 메뉴 열기 (삭제, 새 탭에서 열기, 북마크 추가)

---

## 3. 비기능 요구사항 (Non-Functional Requirements)

### 성능
- **히스토리 로딩 시간**: 앱 시작 시 IndexedDB에서 히스토리 데이터 로드 1초 이내
- **히스토리 기록 속도**: 페이지 방문 후 히스토리 저장 0.5초 이내 (백그라운드 처리)
- **목록 스크롤 성능**: 히스토리 1,000개 이상일 때도 스크롤 버벅임 없이 부드럽게 동작
- **검색 응답 속도**: 검색어 입력 후 0.3초 이내 결과 표시
- **메모리 사용량**: 히스토리 데이터 및 UI는 최대 50MB 이하

### 가독성 (대화면 최적화)
- **폰트 크기**:
  - 히스토리 제목: 최소 20px
  - URL 서브 텍스트: 최소 16px
  - 날짜 그룹 헤더: 최소 22px (굵게)
- **대비**: 배경과 전경 색상 대비 비율 4.5:1 이상 (WCAG AA 기준)
- **포커스 표시**: 포커스된 히스토리 항목은 3px 두께 테두리 또는 명확한 배경색 변화
- **아이콘 크기**: 파비콘 최소 32x32px

### UX (리모컨 최적화)
- **포커스 경로**: 리모컨 방향키로 모든 히스토리 항목, 버튼에 접근 가능
- **직관적인 날짜 그룹**: 날짜 그룹이 명확하게 시각적으로 구분됨 (구분선, 헤더)
- **피드백 제공**: 히스토리 삭제 시 토스트 메시지 또는 애니메이션
- **에러 복구**: 삭제 후 "실행 취소" 옵션 제공 (선택적 기능)

### 확장성
- **히스토리 동기화**: 향후 LG 계정 연동으로 히스토리 클라우드 동기화 가능하도록 서비스 계층 모듈화
- **히스토리 가져오기/내보내기**: JSON 파일 가져오기/내보내기 기능 추가 가능
- **통계 기능**: 방문 빈도, 시간대별 통계 제공 가능 (향후 확장)

### 보안 및 프라이버시
- **URL 저장**: 히스토리는 URL과 제목만 저장, 쿠키나 폼 데이터는 저장하지 않음
- **XSS 방지**: 히스토리 제목, URL에 HTML 태그 이스케이프 처리
- **시크릿 모드 준비**: 향후 시크릿 모드 활성화 시 히스토리 기록 안 함 (F-11 연계)
- **히스토리 자동 삭제**: 설정에서 자동 삭제 기간 설정 가능 (예: 30일 이후 자동 삭제)

---

## 4. 제약조건

### webOS 플랫폼 제약사항
- **리모컨 전용 입력**: 마우스, 터치, 물리 키보드 사용 불가
- **Spotlight 시스템**: Enact의 Spotlight 시스템을 통해 포커스 관리 필수 (Spotlightable 컴포넌트 사용)
- **5-way 방향키**: 상/하/좌/우/선택 버튼만으로 모든 입력 처리
- **화면 해상도**: 4K UHD (3840x2160) 기본, Full HD (1920x1080) 호환

### 기술 제약사항
- **프레임워크**: Enact 프레임워크 기반 (React 컴포넌트)
- **UI 컴포넌트**: Enact Moonstone UI 컴포넌트 우선 사용 (VirtualList, Panels, Dialog 등)
- **CSS Modules**: 스타일링은 `.module.less` 파일로 분리
- **상태 관리**: React Hooks (useState, useReducer, useContext)
- **데이터 저장**: IndexedDB (webOS에서 권장, LocalStorage는 용량 제한)
- **히스토리 용량**: IndexedDB 용량 제한 고려, 최대 5,000개 항목으로 제한

### 의존성
- **F-01 (프로젝트 초기 설정)**: Enact 프로젝트 구조 및 라우팅 설정 완료 필요
- **F-02 (웹뷰 통합)**: 페이지 방문 이벤트 (`onLoadEnd`, `onNavigationChange`) 필요
- **F-03 (URL 입력 UI)**: URL 자동완성 연동 시 가상 키보드 사용 (선택적)
- **F-05 (로딩 인디케이터)**: 히스토리 실행 시 로딩 상태 표시
- **F-10 (에러 처리)**: 히스토리 실행 실패 시 에러 페이지 표시

### 범위 외 (Out of Scope)
- **히스토리 동기화**: 외부 브라우저 또는 클라우드와 히스토리 동기화 미지원 (향후 확장 가능)
- **히스토리 가져오기/내보내기**: JSON 파일 가져오기/내보내기 미지원
- **방문 통계**: 방문 빈도, 시간대별 통계 시각화 미지원
- **히스토리 그룹화**: 도메인별, 카테고리별 그룹화 미지원
- **시크릿 모드**: 히스토리 기록 안 함 (F-11에서 구현 예정)

---

## 5. 용어 정의

| 용어 | 정의 |
|------|------|
| **히스토리** | 사용자가 방문한 웹 페이지의 URL, 제목, 방문 시각을 기록한 항목 |
| **HistoryPanel** | 히스토리 목록을 표시하고 관리하는 UI 패널 컴포넌트 |
| **HistoryManager** | 히스토리 데이터의 CRUD 작업을 담당하는 서비스 계층 |
| **날짜별 그룹화** | 히스토리를 "오늘", "어제", "지난 7일" 등 날짜 기준으로 분류하는 UI 표현 방식 |
| **IndexedDB** | 브라우저 내장 NoSQL 데이터베이스로, 대용량 데이터 저장에 적합 |
| **파비콘** | 웹사이트의 작은 아이콘 이미지 (16x16px 또는 32x32px) |
| **컨텍스트 메뉴** | 히스토리 항목에서 추가 작업(삭제, 북마크 추가 등)을 선택할 수 있는 팝업 메뉴 |
| **토스트 메시지** | 화면 하단에 짧게 표시되는 알림 메시지 (예: "히스토리가 삭제되었습니다") |
| **자동완성** | URL 입력 시 히스토리 데이터를 기반으로 제안하는 기능 |
| **visitCount** | 동일 URL을 방문한 횟수 (중복 방지 및 우선순위 계산에 사용) |

---

## 6. 완료 기준 (Acceptance Criteria)

### AC-1: 자동 히스토리 기록
- [ ] 웹 페이지 방문 시 자동으로 히스토리에 저장
- [ ] 저장 데이터: URL, 제목, 방문 시각, 파비콘 (선택)
- [ ] 페이지 로딩 성공 시에만 기록, 에러 페이지는 제외
- [ ] 동일 URL 1분 내 재방문 시 중복 기록 안 함 (방문 시각만 업데이트)
- [ ] IndexedDB에 백그라운드로 저장, UI 차단 없음

### AC-2: 히스토리 목록 조회
- [ ] HistoryPanel 열기 버튼 클릭 시 히스토리 목록 패널 표시
- [ ] 날짜별 그룹화: "오늘", "어제", "지난 7일", "이번 달", "이전 달"
- [ ] 최신순 정렬 (가장 최근 방문이 상단)
- [ ] 각 항목: 파비콘, 제목, URL, 방문 시각 표시
- [ ] 리모컨 방향키로 목록 스크롤 및 탐색 가능
- [ ] 빈 히스토리일 경우 안내 메시지 표시
- [ ] 백 버튼으로 패널 닫기

### AC-3: 히스토리 실행
- [ ] 히스토리 항목 선택 시 해당 URL로 페이지 로드
- [ ] 로드 시작 시 로딩 인디케이터 표시
- [ ] 로드 성공 시 HistoryPanel 자동 닫기
- [ ] 로드 실패 시 에러 메시지 표시

### AC-4: 히스토리 삭제
- [ ] 개별 삭제: 항목별 삭제 버튼 또는 컨텍스트 메뉴
- [ ] 삭제 확인 다이얼로그 표시, 확인 후 삭제
- [ ] 삭제 후 목록에서 즉시 제거, 토스트 메시지 표시
- [ ] 전체 삭제: "모두 삭제" 버튼으로 전체 히스토리 삭제
- [ ] 기간별 삭제: "지난 1시간", "오늘", "지난 7일" 등 기간 선택 삭제
- [ ] 삭제 후 포커스는 이전 또는 다음 항목으로 이동

### AC-5: 히스토리 검색
- [ ] HistoryPanel 상단에 검색 입력 필드
- [ ] 리모컨 가상 키보드로 검색어 입력
- [ ] 제목 또는 URL에서 일치하는 히스토리 실시간 필터링
- [ ] 검색 결과도 날짜별 그룹화 유지
- [ ] 검색 결과 없을 경우 안내 메시지 표시

### AC-6: 데이터 영속성
- [ ] 히스토리 추가/삭제 시 IndexedDB에 즉시 반영
- [ ] 앱 재시작 후 저장된 히스토리 데이터 정상 로드
- [ ] 앱 초기화 시 1초 이내 히스토리 데이터 로드
- [ ] 히스토리 최대 5,000개 제한, 오래된 항목부터 자동 삭제

### AC-7: URL 자동완성 연동
- [ ] URLBar에서 입력 시 히스토리 기반 자동완성 제안 표시
- [ ] 제안 항목: 제목, URL, 마지막 방문 시각
- [ ] 방문 빈도 및 최근 방문 순으로 우선순위 정렬
- [ ] 방향키로 제안 탐색, Enter로 선택
- [ ] 최대 10개 제안 표시

### AC-8: 리모컨 키 매핑
- [ ] 방향키로 히스토리 목록 탐색 가능
- [ ] 선택 버튼으로 히스토리 실행
- [ ] 백 버튼으로 패널 닫기
- [ ] 컬러 버튼으로 검색/삭제/모두 삭제 (선택적)
- [ ] 모든 기능을 마우스 없이 리모컨만으로 사용 가능

### AC-9: 성능 및 가독성
- [ ] 히스토리 목록 로딩 시간 1초 이내
- [ ] 히스토리 기록 저장 속도 0.5초 이내
- [ ] 히스토리 1,000개 이상일 때도 스크롤 부드럽게 동작
- [ ] 검색 응답 속도 0.3초 이내
- [ ] 폰트 크기가 3m 거리에서 가독 가능 (최소 20px)
- [ ] 포커스된 히스토리 항목이 명확하게 구분됨

### AC-10: 회귀 테스트
- [ ] 페이지 방문 → 히스토리 자동 기록 → 목록에 표시 → 실행 → 페이지 로드 전체 흐름 정상 동작
- [ ] 동일 URL 1분 내 재방문 시 중복 기록 안 함
- [ ] 히스토리 삭제 후 목록에서 제거, 재시작 후에도 삭제 유지
- [ ] 앱 재시작 후 모든 히스토리 데이터 정상 로드
- [ ] 히스토리 5,000개 초과 시 오래된 항목부터 자동 삭제

---

## 7. 데이터 구조

### 히스토리 데이터 모델
```javascript
{
  id: "uuid-v4", // 고유 ID
  url: "https://www.youtube.com", // 방문한 URL
  title: "YouTube", // 페이지 제목
  favicon: "https://www.youtube.com/favicon.ico", // 파비콘 URL (선택)
  visitedAt: 1620000000000, // 방문 시각 (Unix timestamp, 밀리초)
  visitCount: 1 // 방문 횟수 (동일 URL 재방문 시 증가)
}
```

### IndexedDB 스키마
- **데이터베이스**: `webOSBrowserDB`
- **버전**: 1
- **오브젝트 스토어**: `history`
  - **키 경로**: `id` (자동 생성)
  - **인덱스**:
    - `url` (unique: false, 중복 조회용)
    - `visitedAt` (unique: false, 날짜별 정렬용)
    - `title` (unique: false, 검색용)

### 날짜별 그룹화 로직
```javascript
// 예시: 날짜별 그룹화
const groupByDate = (historyItems) => {
  const now = Date.now()
  const oneDay = 24 * 60 * 60 * 1000

  const groups = {
    today: [],      // 오늘 (0 ~ 24시간 전)
    yesterday: [],  // 어제 (24 ~ 48시간 전)
    last7Days: [],  // 지난 7일 (2 ~ 7일 전)
    thisMonth: [],  // 이번 달 (8 ~ 30일 전)
    older: []       // 이전 달 (30일 이상)
  }

  historyItems.forEach(item => {
    const diff = now - item.visitedAt
    if (diff < oneDay) groups.today.push(item)
    else if (diff < oneDay * 2) groups.yesterday.push(item)
    else if (diff < oneDay * 7) groups.last7Days.push(item)
    else if (diff < oneDay * 30) groups.thisMonth.push(item)
    else groups.older.push(item)
  })

  return groups
}
```

---

## 8. 참고 사항

### 관련 문서
- PRD: `docs/project/prd.md`
- 기능 백로그: `docs/project/features.md`
- CLAUDE.md: 프로젝트 규칙 및 코딩 컨벤션
- 북마크 관리 요구사항: `docs/specs/bookmark-management/requirements.md` (유사 패턴 참고)
- 웹뷰 통합 요구사항: `docs/specs/webview-integration/requirements.md` (페이지 방문 이벤트 연동)
- URL 입력 UI 요구사항: `docs/specs/url-input-ui/requirements.md` (자동완성 연동)

### 참고 구현
- Enact VirtualList: https://enactjs.com/docs/modules/moonstone/VirtualList/
- Enact Panels: https://enactjs.com/docs/modules/moonstone/Panels/
- Enact Dialog: https://enactjs.com/docs/modules/moonstone/Dialog/
- IndexedDB API: https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API
- Date/Time Formatting: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat

### 우선순위 조정 가능성
- 히스토리 검색 (FR-5)은 Should 우선순위로, 기본 히스토리 CRUD 완료 후 추가 가능
- URL 자동완성 연동 (FR-7)은 Should 우선순위로, F-03 URL 입력 UI와 통합 가능
- 파비콘 자동 다운로드는 선택적 기능으로, 기본 기능 완료 후 추가 가능

### 기술적 고려사항
- **IndexedDB vs LocalStorage**: LocalStorage는 용량 제한(5MB)이 있어 히스토리 데이터 저장에 부적합하므로 IndexedDB 사용 권장
- **중복 방지 로직**: 동일 URL을 짧은 시간 내 재방문 시 중복 기록하지 않고 visitCount와 visitedAt만 업데이트
- **히스토리 용량 관리**: 히스토리가 5,000개를 초과하면 가장 오래된 항목부터 자동 삭제하여 성능 유지
- **날짜별 그룹화 성능**: VirtualList를 사용하여 많은 히스토리 항목도 부드럽게 스크롤 가능
- **검색 성능**: IndexedDB 인덱스를 활용하여 빠른 검색 제공

### 병렬 작업 가능성
- F-07 (북마크 관리), F-08 (히스토리 관리), F-09 (검색 엔진 통합)은 PG-2 병렬 그룹으로 독립적으로 개발 가능
- HistoryManager 서비스와 HistoryPanel 컴포넌트는 동일 기능 내에서 순차 개발 권장 (충돌 방지)

---

## 9. 변경 이력

| 날짜 | 변경 내용 | 작성자 |
|------|-----------|--------|
| 2026-02-13 | 초기 요구사항 분석서 작성 | product-manager |
