# 설정 화면 — 요구사항 분석서

## 1. 개요

### 기능명
설정 화면 (Settings Panel)

### 목적
사용자가 브라우저의 동작 방식과 외관을 자신의 선호에 맞게 조정할 수 있도록 설정 인터페이스를 제공합니다. 검색 엔진 선택, 홈페이지 URL 지정, 테마 변경, 브라우징 데이터 관리 등 브라우저 커스터마이징 기능을 집중 관리합니다.

### 대상 사용자
- **가족 영화 시청자**: 자주 사용하는 스트리밍 사이트를 홈페이지로 설정하고자 하는 사용자
- **뉴스/정보 소비자**: 선호하는 검색 엔진(네이버, 구글)을 기본으로 설정하고자 하는 사용자
- **프라이버시 의식 사용자**: 브라우징 데이터를 주기적으로 삭제하고자 하는 사용자

### 요청 배경
- webOS 프로젝터 환경에서 사용자마다 선호하는 검색 엔진, 시작 페이지, 테마가 다름
- 대화면 환경에서는 다크 테마가 시청 피로도를 줄일 수 있음
- 프라이버시 보호를 위해 쿠키, 캐시, 히스토리를 삭제할 수 있는 UI가 필요함
- 설정 변경이 즉시 앱에 반영되어야 사용자 경험이 자연스러움

## 2. 기능 요구사항 (Functional Requirements)

### FR-1: 설정 패널 UI
- **설명**: 리모컨으로 조작 가능한 설정 화면을 제공합니다.
- **유저 스토리**: As a 사용자, I want 설정 버튼을 눌러 설정 화면을 열고 싶다, so that 브라우저 옵션을 조정할 수 있다.
- **세부 요구사항**:
  - 메인 화면에서 설정 버튼(톱니바퀴 아이콘) 제공
  - 설정 패널은 Enact Panel 또는 Popup으로 표시
  - 리모컨 십자키로 설정 항목 간 포커스 이동
  - 각 설정 항목은 현재 값과 변경 컨트롤(드롭다운, 입력 필드, 버튼) 표시
  - ESC 또는 Back 버튼으로 설정 패널 닫기
- **우선순위**: Must

### FR-2: 검색 엔진 선택
- **설명**: 기본 검색 엔진을 사용자가 선택할 수 있습니다.
- **유저 스토리**: As a 한국 사용자, I want 네이버를 기본 검색 엔진으로 설정하고 싶다, so that URL 입력 시 네이버 검색을 바로 사용할 수 있다.
- **세부 요구사항**:
  - 지원 검색 엔진: Google, Naver, DuckDuckGo, Bing
  - 드롭다운(Picker) 컴포넌트로 선택
  - 선택 시 즉시 Settings 서비스에 저장
  - URLBar의 검색 동작이 선택된 엔진으로 즉시 변경
- **기본값**: Google
- **우선순위**: Must

### FR-3: 홈페이지 URL 설정
- **설명**: 홈 버튼 클릭 시 이동할 홈페이지 URL을 사용자가 지정할 수 있습니다.
- **유저 스토리**: As a 사용자, I want YouTube를 홈페이지로 설정하고 싶다, so that 홈 버튼 클릭 시 바로 YouTube로 이동할 수 있다.
- **세부 요구사항**:
  - 입력 필드에 URL 입력 (가상 키보드 지원)
  - URL 유효성 검증 (http://, https:// 자동 추가)
  - 저장 버튼 클릭 시 Settings 서비스에 저장
  - NavigationBar의 홈 버튼 동작이 설정된 URL로 변경
  - 빈 값 설정 시 브라우저 자체 홈 화면(F-15)으로 이동
- **기본값**: `about:blank` 또는 브라우저 홈 화면
- **우선순위**: Must

### FR-4: 테마 선택
- **설명**: 브라우저 UI의 테마를 다크 모드 또는 라이트 모드로 전환할 수 있습니다.
- **유저 스토리**: As a 사용자, I want 다크 테마를 설정하고 싶다, so that 어두운 환경에서 눈의 피로를 줄일 수 있다.
- **세부 요구사항**:
  - 테마 선택: Light / Dark
  - 드롭다운 또는 라디오 버튼으로 선택
  - 선택 시 전역 CSS 클래스 변경 (예: `body.dark-theme`)
  - Enact Moonstone의 `skinVariants`를 활용하여 테마 변경
  - 설정 즉시 UI에 반영
- **기본값**: Light
- **우선순위**: Must

### FR-5: 브라우징 데이터 삭제
- **설명**: 사용자가 브라우징 데이터를 선택적으로 삭제할 수 있습니다.
- **유저 스토리**: As a 프라이버시 의식 사용자, I want 히스토리와 쿠키를 삭제하고 싶다, so that 내 방문 기록이 남지 않도록 할 수 있다.
- **세부 요구사항**:
  - 삭제 대상 선택 (체크박스):
    - 히스토리 (방문 기록)
    - 북마크
    - 쿠키 및 캐시
    - 다운로드 목록
  - "삭제" 버튼 클릭 시 확인 다이얼로그 표시
  - 확인 후 선택된 데이터 삭제
  - 삭제 완료 시 토스트 메시지 표시 ("브라우징 데이터가 삭제되었습니다")
  - 쿠키/캐시 삭제는 webOS WebView API의 clearCache() 메서드 활용
- **우선순위**: Must

### FR-6: 설정 저장 및 복원
- **설명**: 설정 값을 로컬 저장소에 영속화하고, 앱 재시작 시 복원합니다.
- **유저 스토리**: As a 사용자, I want 설정한 검색 엔진과 테마가 앱 재시작 후에도 유지되기를 원한다, so that 매번 다시 설정하지 않아도 된다.
- **세부 요구사항**:
  - Settings 서비스에서 LocalStorage 또는 LS2 API 사용
  - 저장 데이터 구조:
    ```json
    {
      "searchEngine": "Google",
      "homepageUrl": "https://www.youtube.com",
      "theme": "Dark"
    }
    ```
  - 앱 시작 시 Settings 서비스가 저장된 설정 로드
  - 저장 실패 시 기본값 사용 (에러 로그 기록)
- **우선순위**: Must

### FR-7: 설정 항목 추가 확장성
- **설명**: 향후 설정 항목 추가가 용이한 구조로 설계합니다.
- **세부 요구사항**:
  - 설정 항목을 배열 또는 객체로 관리하여 새 항목 추가 용이
  - 예: 글꼴 크기, 자동 완성 활성화, 광고 차단 등
- **우선순위**: Should

## 3. 비기능 요구사항 (Non-Functional Requirements)

### 성능
- **설정 변경 반응 속도**: 설정 변경 후 0.5초 이내에 UI에 반영
- **저장 성능**: 설정 저장 시 0.3초 이내 완료
- **데이터 삭제 성능**: 브라우징 데이터 삭제 시 5초 이내 완료 (대용량 히스토리 고려)

### UX (리모컨 최적화)
- **포커스 관리**: 설정 패널 열릴 때 첫 번째 항목에 자동 포커스
- **포커스 표시**: 현재 포커스된 설정 항목에 두꺼운 테두리 또는 배경색 변경
- **키보드 매핑**:
  - 위/아래: 설정 항목 간 포커스 이동
  - 좌/우: 드롭다운 값 변경 (검색 엔진, 테마 선택 시)
  - 선택(OK) 버튼: 항목 선택, 입력 필드 활성화, 삭제 버튼 실행
  - Back/ESC: 설정 패널 닫기
- **가독성**: 설정 항목 레이블 최소 폰트 크기 20px, 설명 텍스트 16px
- **피드백**: 설정 변경 시 시각적 피드백 (체크 아이콘, 토스트 메시지)

### 보안
- **데이터 삭제 확인**: 브라우징 데이터 삭제 시 확인 다이얼로그 필수
- **URL 검증**: 홈페이지 URL 입력 시 악성 URL 체크 (XSS 방지)

### 접근성
- **명확한 레이블**: 각 설정 항목에 명확한 레이블과 설명 제공
- **포커스 순서**: 논리적인 포커스 이동 순서 (위에서 아래로)

### 확장성
- **플러그인 구조**: 설정 항목을 모듈화하여 새 항목 추가 시 기존 코드 수정 최소화
- **설정 동기화 준비**: 향후 LG 계정 연동 시 설정 동기화 가능하도록 JSON 구조 설계

## 4. 제약조건

### webOS 플랫폼 제약
- **LocalStorage 제한**: webOS는 LocalStorage 용량 제한이 있을 수 있으므로, 설정 데이터는 최소화 (JSON 문자열로 직렬화)
- **LS2 API 사용**: 더 안정적인 영속화를 위해 webOS LS2 API 사용 권장
- **WebView 쿠키/캐시 삭제**: webOS WebView API의 clearCache(), clearCookies() 메서드 사용 (API 문서 확인 필요)

### 리모컨 입력 제약
- **입력 속도**: URL 입력은 가상 키보드 사용으로 느릴 수 있음 (자동완성, 북마크 선택으로 보완)
- **포커스 관리**: 설정 항목이 많아질 경우 스크롤 및 포커스 이동 최적화 필요

### 의존성
- **F-09 검색 엔진 통합**: 검색 엔진 선택 기능은 F-09의 SearchEngine 서비스 구현 후 가능
- **F-07 북마크 관리, F-08 히스토리 관리**: 브라우징 데이터 삭제는 BookmarkManager, HistoryManager 서비스 필요

## 5. 용어 정의

| 용어 | 정의 |
|------|------|
| 설정 패널 (Settings Panel) | 브라우저 설정을 변경하는 UI 화면 (Enact Panel 또는 Popup) |
| 검색 엔진 (Search Engine) | URL 입력 시 검색어로 인식할 경우 사용할 검색 서비스 (Google, Naver 등) |
| 홈페이지 (Homepage) | 홈 버튼 클릭 시 이동할 초기 페이지 URL |
| 테마 (Theme) | UI의 색상 스킴 (Light 또는 Dark) |
| 브라우징 데이터 (Browsing Data) | 사용자의 웹 탐색 중 생성된 데이터 (히스토리, 쿠키, 캐시, 북마크, 다운로드) |
| LocalStorage | 브라우저 로컬 저장소 (key-value 저장) |
| LS2 API | webOS 로컬 스토리지 API (webOS 앱에서 데이터 영속화) |
| 가상 키보드 (Virtual Keyboard) | 리모컨으로 텍스트 입력을 위한 화면 키보드 UI |

## 6. 범위 외 (Out of Scope)

### 이번 기능에서 하지 않는 것
- **고급 개인정보 보호 설정**: 트래킹 방지, 쿠키 차단 정책 등은 포함하지 않음 (추후 확장 가능)
- **언어 설정**: UI 언어 변경 기능은 포함하지 않음 (한국어 고정)
- **글꼴 크기 조정**: 본 기능에서는 테마만 지원, 글꼴 크기는 추후 확장
- **자동 업데이트 설정**: 앱 자동 업데이트 설정은 webOS 시스템 레벨 기능
- **계정 동기화**: LG 계정 연동 및 설정 동기화는 추후 확장
- **광고 차단 설정**: 광고 차단 기능은 범위 외
- **확장 프로그램 관리**: Chrome 확장 기능은 webOS에서 지원하지 않음

## 7. 수용 기준 (Acceptance Criteria)

### 설정 패널 접근
- [ ] 메인 화면에 설정 버튼(톱니바퀴 아이콘) 표시
- [ ] 설정 버튼 클릭 시 설정 패널 열림
- [ ] 설정 패널은 리모컨 십자키로 항목 간 이동 가능
- [ ] Back 버튼으로 설정 패널 닫기

### 검색 엔진 선택
- [ ] 검색 엔진 드롭다운에 Google, Naver, DuckDuckGo, Bing 표시
- [ ] 검색 엔진 선택 후 URLBar에서 검색 시 선택된 엔진으로 검색
- [ ] 앱 재시작 후에도 선택된 검색 엔진 유지

### 홈페이지 URL 설정
- [ ] 홈페이지 URL 입력 필드에 가상 키보드로 입력 가능
- [ ] 유효하지 않은 URL 입력 시 에러 메시지 표시
- [ ] 저장 후 NavigationBar의 홈 버튼 클릭 시 설정된 URL로 이동
- [ ] 앱 재시작 후에도 홈페이지 URL 유지

### 테마 선택
- [ ] 테마 선택 드롭다운에 Light, Dark 표시
- [ ] 테마 선택 시 즉시 UI 색상 변경
- [ ] 앱 재시작 후에도 선택된 테마 유지

### 브라우징 데이터 삭제
- [ ] 삭제 대상 체크박스: 히스토리, 북마크, 쿠키/캐시, 다운로드
- [ ] 삭제 버튼 클릭 시 확인 다이얼로그 표시
- [ ] 확인 후 선택된 데이터 삭제 완료
- [ ] 삭제 후 토스트 메시지 표시
- [ ] 히스토리 삭제 시 HistoryPanel에서 기록 사라짐
- [ ] 북마크 삭제 시 BookmarkPanel에서 북마크 사라짐
- [ ] 쿠키/캐시 삭제 후 웹사이트 재로그인 필요 (세션 초기화 확인)

### 설정 영속화
- [ ] 앱 종료 후 재시작 시 모든 설정 값 복원
- [ ] 설정 저장 실패 시 기본값 사용 및 에러 로그 기록

### UX
- [ ] 설정 패널 열릴 때 첫 번째 항목에 자동 포커스
- [ ] 포커스된 항목에 명확한 시각적 표시 (테두리 또는 배경색)
- [ ] 설정 변경 후 0.5초 이내 UI 반영
- [ ] 대화면에서 가독성 확보 (3m 거리에서 텍스트 읽기 가능)

### 성능
- [ ] 설정 저장 시 0.3초 이내 완료
- [ ] 브라우징 데이터 삭제 시 5초 이내 완료
- [ ] 테마 변경 시 화면 깜빡임 없이 부드럽게 전환

### 보안
- [ ] 브라우징 데이터 삭제 시 확인 다이얼로그 필수
- [ ] 홈페이지 URL 입력 시 XSS 방지 검증

## 8. 참조 문서

- PRD: `docs/project/prd.md`
- 기능 백로그: `docs/project/features.md` (F-11)
- 관련 기능: F-09 (검색 엔진 통합), F-07 (북마크 관리), F-08 (히스토리 관리)
- webOS LS2 API 문서: https://webostv.developer.lge.com/develop/references/ls2-api
- Enact Moonstone UI: https://enactjs.com/docs/modules/moonstone/
